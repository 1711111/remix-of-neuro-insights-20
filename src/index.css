@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&family=Poppins:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 120 40% 98%;
    --foreground: 160 30% 15%;
    
    --card: 0 0% 100%;
    --card-foreground: 160 30% 15%;
    
    --popover: 0 0% 100%;
    --popover-foreground: 160 30% 15%;
    
    --primary: 152 76% 42%;
    --primary-foreground: 0 0% 100%;
    
    --secondary: 200 85% 55%;
    --secondary-foreground: 0 0% 100%;
    
    --muted: 140 20% 94%;
    --muted-foreground: 160 15% 45%;
    
    --accent: 160 60% 90%;
    --accent-foreground: 160 30% 20%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    
    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;
    
    --warning: 45 93% 47%;
    --warning-foreground: 0 0% 100%;
    
    --border: 140 20% 88%;
    --input: 140 20% 88%;
    --ring: 152 76% 42%;
    
    --radius: 1rem;
    
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 160 30% 8%;
    --foreground: 140 20% 95%;
    
    --card: 160 25% 12%;
    --card-foreground: 140 20% 95%;
    
    --popover: 160 25% 12%;
    --popover-foreground: 140 20% 95%;
    
    --primary: 152 76% 42%;
    --primary-foreground: 0 0% 100%;
    
    --secondary: 200 85% 55%;
    --secondary-foreground: 0 0% 100%;
    
    --muted: 160 20% 18%;
    --muted-foreground: 140 15% 60%;
    
    --accent: 160 40% 20%;
    --accent-foreground: 140 20% 95%;
    
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    
    --border: 160 20% 20%;
    --input: 160 20% 20%;
    --ring: 152 76% 42%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground font-sans antialiased;
    -webkit-tap-highlight-color: transparent;
  }
  
  html {
    scroll-behavior: smooth;
  }

  /* Safe area insets for mobile devices with notches */
  .safe-area-top {
    padding-top: env(safe-area-inset-top, 0);
  }
  
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0);
  }

  /* Improve touch targets */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Small buttons exception */
  .btn-sm, [data-size="sm"] {
    min-height: 36px;
    min-width: auto;
  }
}

@layer utilities {
  .gradient-hero {
    background: linear-gradient(135deg, hsl(152, 76%, 42%) 0%, hsl(200, 85%, 55%) 100%);
  }
  
  .gradient-text {
    background: linear-gradient(135deg, hsl(152, 76%, 42%) 0%, hsl(200, 85%, 55%) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .glass-card {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
  
  .dark .glass-card {
    background: rgba(20, 30, 25, 0.8);
    border: 1px solid rgba(60, 80, 70, 0.3);
  }
  
  .float-animation {
    animation: float 6s ease-in-out infinite;
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-20px);
    }
  }
  
  .pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }
  
  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 20px hsl(152, 76%, 42%, 0.3);
    }
    50% {
      box-shadow: 0 0 40px hsl(152, 76%, 42%, 0.6);
    }
  }
}

/* React Activity Feed Overrides */
.raf-status-update-form {
  background: transparent !important;
}

.raf-status-update-form textarea,
.raf-textarea__textarea {
  background: hsl(var(--muted)) !important;
  color: hsl(var(--foreground)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 1rem !important;
  padding: 0.75rem 1rem !important;
  font-size: 0.875rem !important;
  min-height: 80px !important;
}

.raf-status-update-form textarea::placeholder,
.raf-textarea__textarea::placeholder {
  color: hsl(var(--muted-foreground)) !important;
}

/* Emoji picker and attach button fixes - Better alignment */
.raf-status-update-form__actions,
.raf-panel-footer,
.raf-status-update-form > div:last-child {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: 0.75rem !important;
  margin-top: 0.75rem !important;
  padding: 0 !important;
  flex-wrap: wrap !important;
}

.raf-emoji-picker,
.raf-file-picker,
.raf-image-upload-button,
.raf-status-update-form__emoji-picker,
.raf-status-update-form__file-picker {
  position: relative !important;
  display: inline-flex !important;
  align-items: center !important;
  flex-shrink: 0 !important;
}

.raf-emoji-picker button,
.raf-file-picker button,
.raf-image-upload-button,
.raf-status-update-form button:not([type="submit"]) {
  background: hsl(var(--muted)) !important;
  color: hsl(var(--foreground)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 0.75rem !important;
  padding: 0.5rem 0.75rem !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 0.375rem !important;
  cursor: pointer !important;
  transition: all 0.2s !important;
  font-size: 0.875rem !important;
  font-weight: 500 !important;
  min-height: 36px !important;
  height: auto !important;
}

.raf-emoji-picker button:hover,
.raf-file-picker button:hover,
.raf-image-upload-button:hover,
.raf-status-update-form button:not([type="submit"]):hover {
  background: hsl(var(--accent)) !important;
  border-color: hsl(var(--primary)) !important;
}

/* Icon alignment in buttons */
.raf-emoji-picker svg,
.raf-file-picker svg,
.raf-image-upload-button svg,
.raf-status-update-form button svg {
  width: 1.125rem !important;
  height: 1.125rem !important;
  flex-shrink: 0 !important;
}

/* Fix submit button */
.raf-status-update-form button[type="submit"],
.raf-panel-footer button[type="submit"] {
  background: linear-gradient(135deg, hsl(152, 76%, 42%) 0%, hsl(200, 85%, 55%) 100%) !important;
  color: white !important;
  border: none !important;
  border-radius: 9999px !important;
  padding: 0.5rem 1.5rem !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: opacity 0.2s !important;
}

.raf-status-update-form button[type="submit"]:hover {
  opacity: 0.9 !important;
}

/* Emoji picker dropdown */
.emoji-mart,
.raf-emoji-picker__container {
  background: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 1rem !important;
  box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.2) !important;
  z-index: 100 !important;
}

/* Dark mode specific overrides for EcoFeed */
.dark .raf-status-update-form textarea,
.dark .raf-textarea__textarea {
  background: hsl(160, 20%, 6%) !important;
  border-color: hsl(var(--border)) !important;
}

.dark .raf-emoji-picker button,
.dark .raf-file-picker button,
.dark .raf-image-upload-button {
  background: hsl(160, 20%, 6%) !important;
}

.dark .emoji-mart,
.dark .raf-emoji-picker__container {
  background: hsl(160, 25%, 8%) !important;
}

/* Dark mode black background for EcoFeed overlay */
.dark .feed-overlay-dark {
  background: hsl(160, 30%, 4%) !important;
}

/* Panel and card backgrounds in dark mode */
.dark .raf-panel,
.dark .raf-card {
  background: hsl(160, 25%, 8%) !important;
  color: hsl(var(--foreground)) !important;
}

.dark .raf-comment-field input,
.dark .raf-comment-field textarea {
  background: hsl(160, 20%, 6%) !important;
  color: hsl(var(--foreground)) !important;
  border-color: hsl(var(--border)) !important;
}

/* ========== EcoFeed Post/Activity Styling ========== */

/* Activity card container */
.raf-activity,
.raf-card {
  background: hsl(var(--card)) !important;
  color: hsl(var(--foreground)) !important;
  border: none !important;
  box-shadow: none !important;
}

/* Activity header */
.raf-activity__header,
.raf-user-bar {
  padding: 0 !important;
}

.raf-user-bar__username,
.raf-activity__author {
  color: hsl(var(--foreground)) !important;
  font-weight: 600 !important;
  font-size: 0.875rem !important;
}

.raf-user-bar__extra,
.raf-activity__time {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.75rem !important;
}

/* Activity content/text */
.raf-activity__content,
.raf-activity p,
.raf-card__content {
  color: hsl(var(--foreground)) !important;
  font-size: 0.9375rem !important;
  line-height: 1.6 !important;
}

/* Activity footer with reactions */
.raf-activity__footer {
  border-top: 1px solid hsl(var(--border)) !important;
  padding-top: 0.75rem !important;
  margin-top: 0.75rem !important;
}

/* Like button styling */
.raf-like-button,
.raf-reaction-toggle-icon {
  color: hsl(var(--muted-foreground)) !important;
  transition: all 0.2s !important;
}

.raf-like-button:hover,
.raf-reaction-toggle-icon:hover {
  color: hsl(0, 84%, 60%) !important;
  transform: scale(1.1) !important;
}

.raf-like-button--active,
.raf-reaction-toggle-icon--active {
  color: hsl(0, 84%, 60%) !important;
}

.raf-like-button__count,
.raf-reaction-toggle-icon__count {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.875rem !important;
  font-weight: 500 !important;
}

/* Comment section styling */
.raf-comment-list {
  background: transparent !important;
}

.raf-comment-item,
.raf-comment {
  background: hsl(var(--muted)) !important;
  border-radius: 1rem !important;
  padding: 0.75rem 1rem !important;
  margin-bottom: 0.5rem !important;
}

.raf-comment-item__author,
.raf-comment__author {
  color: hsl(var(--foreground)) !important;
  font-weight: 600 !important;
  font-size: 0.8125rem !important;
}

.raf-comment-item__content,
.raf-comment__content {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.8125rem !important;
}

/* Comment input field */
.raf-comment-field {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin-top: 0.75rem !important;
}

.raf-comment-field__group {
  background: hsl(var(--muted)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 9999px !important;
  padding: 0.25rem 0.5rem !important;
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
}

.raf-comment-field__group input {
  background: transparent !important;
  border: none !important;
  color: hsl(var(--foreground)) !important;
  font-size: 0.875rem !important;
  padding: 0.5rem !important;
  flex: 1 !important;
}

.raf-comment-field__group input::placeholder {
  color: hsl(var(--muted-foreground)) !important;
}

.raf-comment-field__group button {
  background: hsl(var(--primary)) !important;
  color: white !important;
  border: none !important;
  border-radius: 9999px !important;
  padding: 0.375rem 1rem !important;
  font-size: 0.75rem !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: opacity 0.2s !important;
}

.raf-comment-field__group button:hover {
  opacity: 0.9 !important;
}

/* Avatar styling */
.raf-avatar,
.raf-user-bar__avatar {
  border-radius: 50% !important;
  overflow: hidden !important;
}

.raf-avatar img,
.raf-user-bar__avatar img {
  object-fit: cover !important;
}

/* Dark mode post overrides */
.dark .raf-activity,
.dark .raf-card {
  background: hsl(160, 25%, 10%) !important;
}

.dark .raf-comment-item,
.dark .raf-comment {
  background: hsl(160, 20%, 6%) !important;
}

.dark .raf-comment-field__group {
  background: hsl(160, 20%, 6%) !important;
  border-color: hsl(var(--border)) !important;
}

/* Image/media in posts */
.raf-gallery,
.raf-activity__media {
  border-radius: 1rem !important;
  overflow: hidden !important;
  margin-top: 0.75rem !important;
}

.raf-gallery img,
.raf-activity__media img {
  border-radius: 1rem !important;
  width: 100% !important;
  object-fit: cover !important;
}

/* Loading states */
.raf-loading-indicator {
  color: hsl(var(--primary)) !important;
}

/* Dropdown and popover overrides */
.raf-dropdown,
.raf-dropdown-panel {
  background: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 0.75rem !important;
  box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.15) !important;
  z-index: 100 !important;
}

.dark .raf-dropdown,
.dark .raf-dropdown-panel {
  background: hsl(160, 25%, 10%) !important;
  box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.4) !important;
}

/* Notification dot */
.raf-icon-badge__badge {
  background: hsl(var(--primary)) !important;
}

/* StatusUpdateForm icons alignment - comprehensive fix */
.raf-status-update-form {
  display: flex !important;
  flex-direction: column !important;
  width: 100% !important;
}

.raf-status-update-form__accessory {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: 0.5rem !important;
  flex-wrap: nowrap !important;
  padding: 0.75rem 0 0 !important;
  border-top: 1px solid hsl(var(--border)) !important;
  margin-top: 0.75rem !important;
}

.raf-status-update-form__accessory > * {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-shrink: 0 !important;
  vertical-align: middle !important;
}

/* Left side icons container */
.raf-status-update-form__accessory-left,
.raf-status-update-form__left {
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
}

/* Right side button */
.raf-status-update-form__accessory-right,
.raf-status-update-form__right {
  margin-left: auto !important;
}

/* Fix icon button containers */
.raf-image-upload,
.raf-file-upload,
.raf-emoji-selector {
  display: inline-flex !important;
  align-items: center !important;
  height: 2.25rem !important;
}

.raf-image-upload label,
.raf-file-upload label {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  cursor: pointer !important;
  width: 2.25rem !important;
  height: 2.25rem !important;
}

.raf-panel-header,
.raf-panel-footer {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
}

.raf-image-upload-button,
.raf-file-upload-button,
.raf-emoji-picker,
button[class*="raf-image"],
button[class*="raf-emoji"] {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 2.25rem !important;
  height: 2.25rem !important;
  padding: 0 !important;
  border-radius: 0.5rem !important;
  background: hsl(var(--muted)) !important;
  border: none !important;
  cursor: pointer !important;
  transition: all 0.2s !important;
}

.raf-image-upload-button:hover,
.raf-file-upload-button:hover,
.raf-emoji-picker:hover,
button[class*="raf-image"]:hover,
button[class*="raf-emoji"]:hover {
  background: hsl(var(--accent)) !important;
}

.raf-image-upload-button svg,
.raf-file-upload-button svg,
.raf-emoji-picker svg,
button[class*="raf-image"] svg,
button[class*="raf-emoji"] svg {
  width: 1.125rem !important;
  height: 1.125rem !important;
  color: hsl(var(--foreground)) !important;
}

/* Submit button styling */
.raf-status-update-form button[type="submit"],
.raf-button--primary {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  height: 2.25rem !important;
  padding: 0 1rem !important;
  border-radius: 0.5rem !important;
  background: hsl(var(--primary)) !important;
  color: hsl(var(--primary-foreground)) !important;
  font-weight: 500 !important;
  font-size: 0.875rem !important;
  border: none !important;
  cursor: pointer !important;
  transition: all 0.2s !important;
}

.raf-status-update-form button[type="submit"]:hover,
.raf-button--primary:hover {
  opacity: 0.9 !important;
}

.dark .raf-image-upload-button,
.dark .raf-file-upload-button,
.dark .raf-emoji-picker,
.dark button[class*="raf-image"],
.dark button[class*="raf-emoji"] {
  background: hsl(160, 20%, 18%) !important;
}

.dark .raf-image-upload-button:hover,
.dark .raf-file-upload-button:hover,
.dark .raf-emoji-picker:hover,
.dark button[class*="raf-image"]:hover,
.dark button[class*="raf-emoji"]:hover {
  background: hsl(160, 20%, 25%) !important;
}

.dark .raf-image-upload-button svg,
.dark .raf-file-upload-button svg,
.dark .raf-emoji-picker svg,
.dark button[class*="raf-image"] svg,
.dark button[class*="raf-emoji"] svg {
  color: hsl(var(--foreground)) !important;
}